Index: src/UserApp.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import java.io.File;\r\nimport java.io.IOException;\r\nimport java.time.LocalDate;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Scanner;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\npublic class UserApp {\r\n    private sys model;\r\n    private Scanner scin;\r\n\r\n    public static void main(String[] args) {\r\n        UserApp app = new UserApp();\r\n        app.run();\r\n    }\r\n\r\n    //calcula outra vez o preço de um artigo\r\n    private void update_artigo(Artigo entry2, Utilizador entry){\r\n        if(entry2.getClass().equals(Malas.class)){\r\n            Malas mala = getMalaFromArtigo(entry2);\r\n            mala.calcPreco(this.getModel().now());\r\n\r\n            this.getModel().getUser().remove(entry2.getID());\r\n            entry.getArtigos().put(mala.getID(), mala);\r\n        } else if(entry2.getClass().equals(Sapatilhas.class)){\r\n            Sapatilhas shoe = getShoeFromArtigo(entry2);\r\n            shoe.calcPreco(this.getModel().now());\r\n\r\n            this.getModel().getUser().remove(entry2.getID());\r\n            entry.getArtigos().put(shoe.getID(), shoe);\r\n        } else if(entry2.getClass().equals(TShirt.class)){\r\n            TShirt tshirt = getTshirtFromArtigo(entry2);\r\n            tshirt.calcPreco();\r\n\r\n            this.getModel().getUser().remove(entry2.getID());\r\n            entry.getArtigos().put(tshirt.getID(), tshirt);\r\n        }\r\n    }\r\n\r\n    private void updates(){\r\n        //update nos produtos vendidos\r\n        for (Map.Entry<String, Utilizador> entry1 : this.getModel().getUser().entrySet()) {\r\n            Utilizador logged = entry1.getValue();\r\n            for (Map.Entry<String, Artigo> entry : logged.getProdutosAVenda().entrySet()) {\r\n                if(entry.getValue().getSold() > 0){\r\n                    logged.adicionarVendaEfetuada(entry.getValue());\r\n                }\r\n            }\r\n        }\r\n        //update dos calculos de cada artigo\r\n        for (Map.Entry<String, Utilizador> entry : this.getModel().getUser().entrySet()) {\r\n            for (Map.Entry<String, Artigo> entry2 : entry.getValue().getArtigos().entrySet()) {\r\n                update_artigo(entry2.getValue(), entry.getValue());\r\n            }\r\n        }\r\n\r\n        //update das encomendas\r\n        for (Map.Entry<String, Utilizador> entry : this.getModel().getUser().entrySet()) {\r\n            for (Map.Entry<String, Encomendas> entry2 : entry.getValue().getEncomendas().entrySet()) {\r\n                entry2.getValue().setEstado(this.getModel().now());\r\n            }\r\n        }\r\n    }\r\n\r\n    private void viagem_tempo(){\r\n        NewMenu viagem = new NewMenu(new String[]{\r\n                \"Futuro\", \"Presente\", \"Passado\" , \"Ver dia\"\r\n        });\r\n\r\n        viagem.setHandler(1, this::futuro);\r\n        viagem.setHandler(2, this::presente);\r\n        viagem.setHandler(3, this::past);\r\n        viagem.setHandler(4, this::day);\r\n\r\n        viagem.setPreCondition(2, ()-> !(LocalDate.now().isEqual(this.getModel().now())));\r\n\r\n        viagem.setTitle(\"Viagem de Tempo\");\r\n\r\n        viagem.run();\r\n    }\r\n\r\n    private Malas getMalaFromArtigo(Artigo entry2){\r\n        Malas mala = new Malas(entry2);\r\n        Malas mala2 = mala.fromString(entry2.toString());\r\n        mala.setDataPremium(mala2.getDataPremium());\r\n        mala.setMaterial(mala2.getMaterial());\r\n        mala.setValorizacao(mala2.getValorizacao());\r\n        mala.setTamanho(mala2.getTamanho());\r\n\r\n        return mala;\r\n    }\r\n\r\n    private Sapatilhas getShoeFromArtigo(Artigo entry2){\r\n        Sapatilhas shoe = new Sapatilhas(entry2);\r\n        Sapatilhas shoe2 = shoe.fromString(entry2.toString());\r\n        shoe.setDataPremium(shoe2.getDataPremium());\r\n        shoe.setAtacadores(shoe2.getAtacadores());\r\n        shoe.setCor(shoe2.getCor());\r\n        shoe.setTamanho(shoe2.getTamanho());\r\n\r\n        return shoe;\r\n    }\r\n\r\n    private TShirt getTshirtFromArtigo(Artigo entry2){\r\n        TShirt tshirt = new TShirt(entry2);\r\n        TShirt tshirt2 = tshirt.fromString(entry2.toString());\r\n        tshirt.setPadrao(tshirt2.getPadrao());\r\n        tshirt.setTamanho(tshirt2.getTamanho());\r\n\r\n        return tshirt;\r\n    }\r\n\r\n    private void day(){\r\n        System.out.println(\"Estamos no dia: \" + this.getModel().now());\r\n    }\r\n\r\n    private void past(){\r\n        System.out.println(\"Dias para o passado: \");\r\n        String days = scin.nextLine(), cancel =\"\";\r\n        while(Integer.parseInt(days) < 1){\r\n            System.out.println(\"Dias de atraso inválido!\");\r\n            System.out.println(\"Cancelar a viagem no tempo [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) return;\r\n            System.out.println(\"Dias para o passado: \");\r\n            days = scin.nextLine();\r\n        }\r\n        this.getModel().past(Integer.parseInt(days));\r\n        updates();\r\n    }\r\n\r\n    private void futuro(){\r\n        System.out.println(\"Dias para o futuro: \");\r\n        String days = scin.nextLine(), cancel =\"\";\r\n        while(Integer.parseInt(days) < 1){\r\n            System.out.println(\"Dias de avanço inválido!\");\r\n            System.out.println(\"Cancelar a viagem no tempo [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) return;\r\n            System.out.println(\"Dias para o futuro: \");\r\n            days = scin.nextLine();\r\n        }\r\n        this.getModel().future(Integer.parseInt(days));\r\n        updates();\r\n    }\r\n\r\n    private void presente(){\r\n        this.getModel().setNow(0);\r\n        updates();\r\n        System.out.println(\"Viagem para o presente concluída!\");\r\n    }\r\n\r\n    private UserApp(){\r\n        model = new sys();\r\n        scin = new Scanner(System.in);\r\n        File file = new File(\"sys.obj\");\r\n        if(file.exists()){\r\n            try{\r\n                this.setModel(this.getModel().load(\"sys.obj\"));\r\n            } catch (ClassNotFoundException | IOException e) {\r\n                System.out.println(\"Erro ao ler ficheiro: \" + e);\r\n\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private void run(){\r\n        updates();\r\n        NewMenu mainMenu = new NewMenu(new String[]{\r\n                \"Log-in\", \"Registar\", \"Viagem no Tempo\"\r\n        });\r\n\r\n        mainMenu.setHandler(1, this::login);\r\n        mainMenu.setHandler(2, this::registar);\r\n        mainMenu.setHandler(3, this::viagem_tempo);\r\n\r\n        mainMenu.setPreCondition(1, ()-> model.getUser().size()  > 0 || model.getTransportadora().size() > 0);\r\n\r\n        mainMenu.setTitle(\"Home\");\r\n\r\n        mainMenu.run();\r\n\r\n        closeApp();\r\n    }\r\n\r\n    private void save(){\r\n        try{\r\n            this.getModel().save(\"sys.obj\");\r\n            System.out.println(\"Salvo!\");\r\n        } catch (IOException e){\r\n            System.out.println(\"Erro a registar ficheiro: \" + e);\r\n        }\r\n    }\r\n\r\n    private void closeApp(){\r\n        String y;\r\n\r\n        System.out.println(\"Queres guardar as mudanças [y/n]?\");\r\n        y = scin.nextLine();\r\n\r\n        if(y.equals(\"y\")){\r\n            save();\r\n        }\r\n\r\n        System.out.println(\"Turning off...\");\r\n\r\n    }\r\n\r\n    private void admin(){\r\n        String login;\r\n\r\n        System.out.println(\"Login key: \");\r\n        login = scin.nextLine();\r\n\r\n        if(login.equals(\"admin\")){\r\n            NewMenu adminMenu = new NewMenu(new String[]{\r\n                    \"Mudar % da vintage\", \"Ver % da vintage\", \"Ver usuarios registados\", \"Eliminar usuário\",\r\n                    \"Ver todas as transportadoras\", \"Eliminar transportadora\", \"Ver todas as encomendas\", \"Ver todos artigos\",\r\n                    \"Ver cardapio\", \"Ver receita da vintage\", \"Vendedor que vendeu mais\",\r\n                    \"Transportadora que faturou mais\", \"Guardar o sistema\"\r\n            });\r\n\r\n            adminMenu.setHandler(1, this::change_cut_vintage);\r\n            adminMenu.setHandler(2, this::see_vintage);\r\n            adminMenu.setHandler(3, this::see_users);\r\n            adminMenu.setHandler(4, this::del_user);\r\n            adminMenu.setHandler(5, this::see_transportadora);\r\n            adminMenu.setHandler(6, this::del_transportadora);\r\n            adminMenu.setHandler(7, this::see_encomendas);\r\n            adminMenu.setHandler(8, this::see_artigos);\r\n            adminMenu.setHandler(9, this::encomenda_cardapio);\r\n            adminMenu.setHandler(10, this::admin_receita);\r\n            adminMenu.setHandler(11, this::admin_seller_receita);\r\n            adminMenu.setHandler(12, this::admin_transportadora_receita);\r\n            adminMenu.setHandler(13, this::save);\r\n\r\n            adminMenu.setPreCondition(3, () -> this.getModel().getUser().size() > 0);\r\n            adminMenu.setPreCondition(4, () -> this.getModel().getUser().size() > 0);\r\n            adminMenu.setPreCondition(5, () -> this.getModel().getTransportadora().size() > 0);\r\n            adminMenu.setPreCondition(6, () -> this.getModel().getTransportadora().size() > 0);\r\n            adminMenu.setPreCondition(7, () -> this.getModel().getUser().size() > 0);\r\n            adminMenu.setPreCondition(12, () -> this.getModel().getTransportadora().size() > 0);\r\n            adminMenu.setPreCondition(11, () -> this.getModel().getUser().size() > 0);\r\n\r\n            adminMenu.run();\r\n        } else{\r\n            System.out.println(\"Login Inválido!\");\r\n        }\r\n    }\r\n\r\n    private void admin_transportadora_receita(){\r\n        double maior = -1.0;\r\n        String id = \"\";\r\n        Transportadoras t = new Transportadoras(1,1,1,1);\r\n        for(Map.Entry<String, Transportadoras> entry : this.getModel().getTransportadora().entrySet()){\r\n            if(maior < entry.getValue().getRev()){\r\n                t = entry.getValue();\r\n                maior = t.getRev();\r\n                id = entry.getKey();\r\n            }\r\n        }\r\n        System.out.println(\"Transportadora que faturou mais: \" + id + \"\\n\" + t\r\n                            + \"\\nFaturou: \" + (maior - (maior * this.getModel().getVintagecut()))\r\n        );\r\n    }\r\n\r\n    private void admin_seller_receita(){\r\n        double maior = -1.0, temp = 0.0;\r\n        Utilizador t = new Utilizador();\r\n        for(Map.Entry<String, Utilizador> entry : this.getModel().getUser().entrySet()){\r\n            if(maior < entry.getValue().getRevenue()){\r\n                t = entry.getValue();\r\n                maior = t.getRevenue();\r\n            }\r\n        }\r\n        System.out.println(\"Vendedor que faturou mais: \" + t\r\n                + \"\\nFaturou: \" + (maior - (maior * this.getModel().getVintagecut()))\r\n        );\r\n    }\r\n\r\n    private void admin_receita(){\r\n        System.out.println(\"Receita total da Vintage: \" + this.getModel().getRev());\r\n    }\r\n\r\n    private void see_artigos(){\r\n        System.out.println(this.getModel().getArtigos());\r\n    }\r\n\r\n    public void see_encomendas(){\r\n        for(Map.Entry<String, Utilizador> entry : this.getModel().getUser().entrySet()){\r\n            if (entry.getValue().getEncomendas().size() > 0) {\r\n                System.out.println(entry.getValue().getEmail() +\": \" +  entry.getValue().getEncomendas());\r\n            }\r\n        }\r\n    }\r\n\r\n    public void see_vintage(){\r\n        System.out.println(this.getModel().getVintagecut() * 100 + \" %\");\r\n    }\r\n\r\n    public void change_cut_vintage(){\r\n        String cut;\r\n        System.out.println(\"Nova % da plataforma para cada venda: \");\r\n        cut = scin.nextLine();\r\n        this.getModel().setVintagecut((double) Integer.parseInt(cut) / 100);\r\n    }\r\n\r\n    private void see_transportadora(){\r\n        System.out.println(model.getTransportadora());\r\n    }\r\n\r\n    private void del_transportadora(){\r\n        String id;\r\n\r\n        System.out.println(\"Número da transportadora a eliminar: \");\r\n        id = scin.nextLine();\r\n\r\n        this.getModel().getTransportadora().remove(id);\r\n    }\r\n\r\n    private void see_users(){\r\n        System.out.println(model.getUser());\r\n    }\r\n\r\n    private  void del_user(){\r\n        String email;\r\n\r\n        System.out.println(\"E-mail/ID do user a eliminar: \");\r\n        email = scin.nextLine();\r\n\r\n        model.DelUser(email);\r\n    }\r\n\r\n    private void login(){\r\n        NewMenu loginMenu = new NewMenu(new String[]{\r\n                 \"User\" , \"Transportadora\", \"Admin\"\r\n        });\r\n\r\n        loginMenu.setHandler(1, this::login_user);\r\n        loginMenu.setHandler(2, this::login_transportadora);\r\n        loginMenu.setHandler(3, this::admin);\r\n\r\n        loginMenu.setPreCondition(1, ()-> this.getModel().getUser().size()>0);\r\n        loginMenu.setPreCondition(2, ()-> this.getModel().getTransportadora().size()>0);\r\n\r\n        loginMenu.run();\r\n    }\r\n\r\n    private void login_transportadora(){\r\n        String id;\r\n\r\n        System.out.println(\"Número da transportadora: \");\r\n        id = scin.nextLine();\r\n\r\n        if(this.getModel().getTransportadora().containsKey(id)){\r\n            Transportadoras logged = model.getTransportadora().get(id);\r\n\r\n            NewMenu userMenu = new NewMenu(new String[]{\r\n                    \"Dados\", \"Alterar Dados\", \"Ver Receita\"\r\n            });\r\n\r\n            userMenu.setHandler(1, ()->this.details_transportadora(logged));\r\n            userMenu.setHandler(2, ()->this.change_config_transportadora(logged));\r\n            userMenu.setHandler(3, ()->this.rev_transportadora(logged));\r\n\r\n            userMenu.run();\r\n        } else{\r\n            System.out.println(\"Transportadora ainda não registada.\");\r\n        }\r\n    }\r\n\r\n    private void rev_transportadora(Transportadoras logged){\r\n        System.out.println(\"Receita até ao momento: \" + (logged.getRev() - (logged.getRev()*this.getModel().getVintagecut())));\r\n    }\r\n\r\n    private void details_transportadora(Transportadoras logged){\r\n        if(logged.getPremium()){\r\n            System.out.println(\"Imposto = \" + logged.getImposto() + \"\\n\"\r\n                    + \"Dias de atraso = \" + logged.getDiasAtraso() + \"\\n\"\r\n                    + \"Valores Base = \" + logged.getValorBase().getPequeno() + \", \"\r\n                    + logged.getValorBase().getMedio() + \", \"\r\n                    + logged.getValorBase().getGrande() + \", \" + \"\\n\"\r\n                    + \"Valores de Expedição = \" + logged.getPrecoExp().getPequeno() + \", \"\r\n                    + logged.getPrecoExp().getMedio() + \", \"\r\n                    + logged.getPrecoExp().getGrande() + \", \" + \"\\n\"\r\n                    + \"Valores de Expedição Premium = \" + logged.getPrecoPremium().getPequeno() + \", \"\r\n                    + logged.getPrecoPremium().getMedio() + \", \"\r\n                    + logged.getPrecoPremium().getGrande() + \"\\n\"\r\n                    + \"Formula: \" + logged.getFormula() + \"\\n\"\r\n                    + \"Formula Premium: \" + logged.getFpremium()\r\n            );\r\n        } else{\r\n            System.out.println(\"Imposto = \" + logged.getImposto() + \"\\n\"\r\n                    + \"Dias de atraso = \" + logged.getDiasAtraso() + \"\\n\"\r\n                    + \"Valores Base = \" + logged.getValorBase().getPequeno() + \", \"\r\n                    + logged.getValorBase().getMedio() + \", \"\r\n                    + logged.getValorBase().getGrande() + \", \" + \"\\n\"\r\n                    + \"Valores de Expedição = \" + logged.getPrecoExp().getPequeno() + \", \"\r\n                    + logged.getPrecoExp().getMedio() + \", \"\r\n                    + logged.getPrecoExp().getGrande() + \"\\n\"\r\n                    + \"Formula: \" + logged.getFormula()\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n    private void change_config_transportadora(Transportadoras logged){\r\n        NewMenu config_trans_Menu = new NewMenu(new String[]{\r\n                \"Ativar/Desativar Premium\" , \"Mudar Valores Base\", \"Mudar Formula Expedição\", \"Mudar Formula Expedição Premium\"\r\n        });\r\n\r\n        config_trans_Menu.setHandler(1, ()-> this.premium_transportadora(logged));\r\n        config_trans_Menu.setHandler(2, ()-> this.base_transportadora(logged));\r\n        config_trans_Menu.setHandler(3, ()-> this.formula_transportadora(logged));\r\n        config_trans_Menu.setHandler(4, ()-> this.formula_premium_transportadora(logged));\r\n\r\n        config_trans_Menu.setPreCondition(4, logged::getPremium);\r\n\r\n        config_trans_Menu.run();\r\n    }\r\n\r\n    private void formula_premium_transportadora(Transportadoras logged){\r\n        System.out.println(\"Formula nova para os preços de expedição Premium:\\nkeys:\\nvalor - valor base dos 3 tamanhos\\nimposto - imposto\");\r\n        String formula = scin.nextLine();\r\n        logged.setFpremium(formula);\r\n        logged.formulaPremium(formula);\r\n\r\n        System.out.println(logged.getPrecoPremium());\r\n    }\r\n\r\n    private void formula_transportadora(Transportadoras logged){\r\n        System.out.println(\"Formula nova para os preços de expedição:\\nkeys:\\nvalor - valor base dos 3 tamanhos\\nimposto - imposto\");\r\n        String formula = scin.nextLine();\r\n        logged.setFormula(formula);\r\n        logged.formula(formula);\r\n\r\n        System.out.println(logged.getPrecoExp());\r\n    }\r\n\r\n    private void base_transportadora(Transportadoras logged){\r\n        String base;\r\n\r\n        System.out.println(\"Preço para encomendas pequenas (1 artigo): \");\r\n        base = scin.nextLine();\r\n        logged.getValorBase().setPequeno(Double.parseDouble(base));\r\n        System.out.println(\"Preço para encomendas médias (2 a 5 artigos): \");\r\n        base = scin.nextLine();\r\n        logged.getValorBase().setMedio(Double.parseDouble(base));\r\n        System.out.println(\"Preço para encomendas grandes (mais que 5 artigos): \");\r\n        base = scin.nextLine();\r\n        logged.getValorBase().setGrande(Double.parseDouble(base));\r\n\r\n        logged.formula(logged.getFormula());\r\n\r\n        if(logged.getPremium()){\r\n            logged.formulaPremium(logged.getFpremium());\r\n            System.out.println(\"Valores base: \" + logged.getValorBase() + \"\\n\" + \"Valores expedição: \" +\r\n                    logged.getPrecoExp() +\"\\n\"+ \"Valores expedição Premium: \" + logged.getPrecoPremium());\r\n        }else{\r\n            System.out.println(\"Valores base: \" + logged.getValorBase() + \"\\n\" + \"Valores expedição: \" +\r\n                    logged.getPrecoExp());\r\n        }\r\n\r\n    }\r\n\r\n    private void premium_transportadora(Transportadoras logged){\r\n        if(logged.getPremium()){\r\n            logged.desativaPremium();\r\n        } else{\r\n            logged.ativaPremium();\r\n        }\r\n    }\r\n\r\n    private void login_user(){\r\n        String email;\r\n\r\n        System.out.println(\"E-mail/ID: \");\r\n        email = scin.nextLine();\r\n\r\n        if(this.getModel().existsEmail(email) || this.getModel().getUser().containsKey(email)){\r\n            Utilizador logged = model.getUser(email);\r\n\r\n            NewMenu userMenu = new NewMenu(new String[]{\r\n                    \"Dados Pessoais\", \"Alterar Configurações\", \"Central de Cliente\", \"Centro de Vendedor\"\r\n            });\r\n\r\n            userMenu.setHandler(1, () -> this.user_details(logged));\r\n            userMenu.setHandler(2, () -> this.user_change_config(logged));\r\n            userMenu.setHandler(3, () -> this.user_central_cliente(logged));\r\n            userMenu.setHandler(4, () -> this.user_central_vendedor(logged));\r\n\r\n            userMenu.run();\r\n        } else{\r\n            System.out.println(\"E-mail ainda não registado.\");\r\n        }\r\n    }\r\n\r\n    private void user_central_cliente(Utilizador logged){\r\n        NewMenu userMenu = new NewMenu(new String[]{\r\n                \"Encomendar\", \"Ver Artigos comprados\"\r\n        });\r\n\r\n        userMenu.setHandler(1, () -> this.user_encomendar(logged));\r\n        userMenu.setHandler(2, () -> this.user_bought(logged));\r\n\r\n        userMenu.run();\r\n    }\r\n\r\n    private void user_central_vendedor(Utilizador logged){\r\n\r\n        NewMenu userMenu = new NewMenu(new String[]{\r\n                \"Criar novo artigo\", \"Publicar/Privar artigo\",\r\n                \"Remover artigo\", \"Ver receita\", \"Ver artigos criados\",\r\n                \"Ver Artigos vendidos\", \"Ver Artigos á venda\",\r\n                \"Alterar configurações de um artigo\", \"Duplicar artigo\",\r\n                \"Ver encomendas enviadas\"\r\n        });\r\n\r\n        userMenu.setHandler(1, () -> this.user_new_artigo(logged));\r\n        userMenu.setHandler(2, () -> this.user_publish_artigo(logged));\r\n        userMenu.setHandler(3, () -> this.user_rm_artigo(logged));\r\n        userMenu.setHandler(4, () -> this.user_receita(logged));\r\n        userMenu.setHandler(5, () ->this.user_artigo_created(logged));\r\n        userMenu.setHandler(6, () ->this.user_sold(logged));\r\n        userMenu.setHandler(7, () -> this.user_selling(logged));\r\n        userMenu.setHandler(8, () -> this.user_artigo_config(logged));\r\n        userMenu.setHandler(9, () -> this.user_artigo_clone(logged));\r\n        userMenu.setHandler(10, () -> this.user_sent(logged));\r\n\r\n        userMenu.run();\r\n    }\r\n\r\n    private void user_sent(Utilizador logged){\r\n        int equals;\r\n        for(Map.Entry<String, Utilizador> entry : this.getModel().getUser().entrySet()){\r\n            for(Map.Entry<String, Encomendas> entry2 : entry.getValue().getEncomendas().entrySet()){\r\n                if(entry2.getValue().getEstado() != 0){\r\n                    equals = 0;\r\n                    for(Map.Entry<String, Artigo> entry3 : entry2.getValue().getArtigos().entrySet()){\r\n                        for(Map.Entry<String, Artigo> entry4 : logged.getVendasEfetuadas().entrySet()){\r\n                            if(entry3.getValue().equals(entry4.getValue())){\r\n                                equals +=1;\r\n                            }\r\n                        }\r\n                    }\r\n                    if(equals > 0){\r\n                        System.out.println(\"To: \" + entry.getValue().getEmail() + \": \" + entry2.getValue());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private void user_artigo_clone(Utilizador logged){\r\n        System.out.println(\"Introduza o id do artigo a duplicar: \");\r\n        String id = scin.nextLine(), cancel = \"\";\r\n        while(!(logged.getArtigos().containsKey(id))){\r\n            System.out.println(\"Não existe artigo com id \" + id + \" na sua conta.\");\r\n            System.out.println(\"Cancelar a mudança [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"id: \");\r\n            id = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n\r\n        Artigo nArtigo = logged.getArtigos().get(id).clone();\r\n\r\n        while(this.getModel().getArtigos().containsKey(nArtigo.getID())){\r\n            nArtigo.setID(nArtigo.generateID());\r\n        }\r\n        System.out.println(\"Id do novo artigo: \" + nArtigo.getID());\r\n\r\n        logged.addArtigo(nArtigo);\r\n\r\n    }\r\n\r\n    private void user_artigo_created(Utilizador logged){\r\n        for(Map.Entry<String, Artigo> entry : logged.getArtigos().entrySet()) {\r\n            if (!this.getModel().now().isBefore(entry.getValue().getBorn())) {\r\n                System.out.println(entry.getValue());\r\n            }\r\n        }\r\n    }\r\n\r\n    private void user_artigo_config(Utilizador logged){\r\n        System.out.println(\"Introduza o id do artigo a editar: \");\r\n        String id = scin.nextLine();\r\n\r\n        if(logged.getArtigos().containsKey(id)){\r\n            NewMenu artigo_Menu = new NewMenu(new String[]{\r\n                    \"Mudar estado\", \"Mudar descricao\",\r\n                    \"Mudar Marca\", \"Mudar Numero de Donos\",\r\n                    \"Mudar preco base\",\"Mudar colecao\",\"Mudar transportadora\"\r\n\r\n            });\r\n            Artigo artigo = logged.getArtigos().get(id);\r\n            artigo_Menu.setHandler(1, () -> this.artigo_estado(artigo, logged));\r\n            artigo_Menu.setHandler(2, () -> this.artigo_descricao(artigo));\r\n            artigo_Menu.setHandler(3, () -> this.artigo_brand(artigo));\r\n            artigo_Menu.setHandler(4, () -> this.artigo_NDonos(artigo, logged));\r\n            artigo_Menu.setHandler(5, () -> this.artigo_precobase(artigo, logged));\r\n            artigo_Menu.setHandler(6, () -> this.artigo_colecao(artigo, logged));\r\n            artigo_Menu.setHandler(7, () -> this.artigo_transportadora(artigo));\r\n\r\n            artigo_Menu.setPreCondition(1, ()-> artigo.getNumeroDonos() > 0);\r\n\r\n            artigo_Menu.run();\r\n        } else{\r\n            System.out.println(\"Artigo com id \" + id + \" não existe.\");\r\n        }\r\n    }\r\n\r\n    private void artigo_estado(Artigo artigo, Utilizador logged) {\r\n        String estado=\"\", cancel=\"\";\r\n        System.out.println(\"Introduza o estado (Pouco usado, Usado, Muito usado):\");\r\n        estado = scin.nextLine();\r\n        while(!( estado.equals(\"Pouco usado\") ||  estado.equals(\"Usado\") ||  estado.equals(\"Muito usado\"))){\r\n            System.out.println(\"Tipo de estado invalido!\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza o estado (Pouco usado, Usado, Muito usado):\");\r\n            estado = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n        artigo.setEstado(estado);\r\n        update_artigo(artigo, logged);\r\n    }\r\n\r\n    private void artigo_descricao(Artigo artigo) {\r\n        System.out.println(\"Nova descricao:\");\r\n        String descricao= scin.nextLine();\r\n        artigo.setDescricao(descricao);\r\n    }\r\n\r\n    private void artigo_brand(Artigo artigo){\r\n        System.out.println(\"Nova marca:\");\r\n        String brand= scin.nextLine();\r\n        artigo.setBrand(brand);\r\n    }\r\n\r\n    private void artigo_NDonos(Artigo artigo, Utilizador logged){\r\n        int numerodonos=0;\r\n        System.out.println(\"Introduza o numero de donos: \");\r\n        String nd = scin.nextLine(), cancel=\"\";\r\n        numerodonos=Integer.parseInt(nd);\r\n        while(numerodonos < 0){\r\n            System.out.println(\"Numero de donos invalido\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza o numero de donos:\");\r\n            nd = scin.nextLine();\r\n            numerodonos=Integer.parseInt(nd);\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n        artigo.setNumeroDonos(numerodonos);\r\n\r\n        if(numerodonos != 0){\r\n            artigo_estado(artigo, logged);\r\n        } else{\r\n            artigo.setEstado(\"Novo\");\r\n        }\r\n    }\r\n\r\n    private void artigo_precobase(Artigo artigo, Utilizador logged){\r\n        System.out.println(\"Novo preco base:\");\r\n        double val = Integer.parseInt(scin.nextLine());\r\n        String cancel=\"\";\r\n        while(val < 0){\r\n            System.out.println(\"Preço invalido\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza o preço:\");\r\n            val = Integer.parseInt(scin.nextLine());\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n\r\n        artigo.setPrecobase(val);\r\n        update_artigo(artigo, logged);\r\n    }\r\n\r\n    private void artigo_colecao(Artigo artigo, Utilizador logged){\r\n        System.out.println(\"Nome da nova coleção:\");\r\n        String id = scin.nextLine(),cancel=\"\";\r\n        while(!(this.getModel().getColecao().containsKey(id))){\r\n            System.out.println(\"Não existe coleção com id/nome: \" + id);\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza o nome da colecao: \");\r\n            id = scin.nextLine();\r\n        }\r\n\r\n        artigo.setColecao(this.getModel().getColecao().get(id));\r\n        update_artigo(artigo, logged);\r\n    }\r\n\r\n    private void artigo_transportadora(Artigo artigo){\r\n        System.out.println(\"Id da nova transportadora:\");\r\n        String idt = scin.nextLine(),cancel=\"\";\r\n        boolean loop;\r\n        loop = !(this.getModel().getTransportadora().containsKey(idt));\r\n        if(!loop) loop = artigo.isPremium() && !this.getModel().getTransportadora().get(idt).getPremium();\r\n        while(loop){\r\n            if(!(this.getModel().getTransportadora().containsKey(idt))) System.out.println(\r\n                    \"Não existe transportadora com id: \" + idt);\r\n            else if(artigo.isPremium() && !this.getModel().getTransportadora().get(idt).getPremium()) System.out.println(\r\n                    \"Essa transportadora não tem expedição premium!\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza o id da transportadora: \");\r\n            idt = scin.nextLine();\r\n            loop = !(this.getModel().getTransportadora().containsKey(idt));\r\n            if(!loop) loop = artigo.isPremium() && !this.getModel().getTransportadora().get(idt).getPremium();\r\n        }\r\n\r\n        artigo.setTransportadoras(this.getModel().getTransportadora().get(idt));\r\n    }\r\n\r\n    private void user_details(Utilizador logged){\r\n        String print=\"\";\r\n        if(!(logged.getRevenue() == 0.0)) print += \"Receita: \" + logged.getRevenue() + \"\\n\";\r\n        if(logged.getProdutosAVenda().size() > 0) print += \"Artigos a venda: \" + logged.getProdutosAVenda()+ \"\\n\";\r\n        if(logged.getVendasEfetuadas().size() > 0) print += \"Vendas efetuadas: \" + logged.getVendasEfetuadas() + \"\\n\";\r\n        if(logged.getArtigos().size() > 0) print += \"Artigos á venda: \" + logged.getArtigos() + \"\\n\";\r\n        if(logged.getEncomendas().size() > 0) print += \"Encomendas Realizadas: \" + logged.getEncomendas();\r\n        System.out.println(\"Email: \" + logged.getEmail() + \"\\n\"\r\n                + \"Nome: \" + logged.getNome() + \"\\n\"\r\n                + \"Morada: \" + logged.getMorada() + \"\\n\"\r\n                + \"Nif: \" + logged.getNif() + \"\\n\"\r\n                + \"User ID: \" + logged.getID() + \"\\n\"\r\n                + print\r\n        );\r\n    }\r\n\r\n    private void user_change_config(Utilizador logged){\r\n        NewMenu config_user_Menu = new NewMenu(new String[]{\r\n                \"Mudar email\" , \"Mudar nome\", \"Mudar morada\", \"Mudar nif\"\r\n        });\r\n\r\n        config_user_Menu.setHandler(1, ()-> this.email_user(logged));\r\n        config_user_Menu.setHandler(2, ()-> this.nome_user(logged));\r\n        config_user_Menu.setHandler(3, ()-> this.morada_user(logged));\r\n        config_user_Menu.setHandler(4, ()-> this.nif_user(logged));\r\n\r\n        config_user_Menu.run();\r\n    }\r\n\r\n    private void email_user(Utilizador logged){\r\n        System.out.println(\"Introduza o novo email:\");\r\n        String email = scin.nextLine(), cancel = \"\";\r\n        while(!(email.contains(\"@\")) || this.getModel().existsEmail(email)){\r\n            if(!(email.contains(\"@\"))){\r\n                System.out.println(\"E-mail Inválido! (não contém @)\");\r\n            }if(this.getModel().existsEmail(email)){\r\n                System.out.println(\"Este e-mail já está registado!\");\r\n            }\r\n            System.out.println(\"Cancelar a mudança [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"E-mail: \");\r\n            email = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n        logged.setEmail(email);\r\n        System.out.println(\"Novo e-mail: \" + logged.getEmail());\r\n    }\r\n    private void nome_user(Utilizador logged){\r\n        System.out.println(\"Introduza novo nome:\");\r\n        String nome = scin.nextLine();\r\n        logged.setNome(nome);\r\n        System.out.println(\"Novo nome: \" + logged.getNome());\r\n    }\r\n    private void morada_user(Utilizador logged){\r\n        System.out.println(\"Introduza nova morada:\");\r\n        String m = scin.nextLine();\r\n        logged.setMorada(m);\r\n        System.out.println(\"Nova morada: \" + logged.getMorada());\r\n    }\r\n    private void nif_user(Utilizador logged){\r\n        System.out.println(\"Introduza novo nif:\");\r\n        String nif = scin.nextLine(), cancel = \"\";\r\n        while(nif.length() != 9){\r\n            System.out.println(\"Nif Inválido!\");\r\n            System.out.println(\"Cancelar a mudança [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Nif (123456789): \");\r\n            nif = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n        logged.setNif(nif);\r\n        System.out.println(\"Novo nif: \" + logged.getNif());\r\n    }\r\n\r\n    private void user_new_artigo(Utilizador logged){\r\n        NewMenu config_user_Menu = new NewMenu(new String[]{\r\n                \"Mala\" , \"Tshirt\", \"Sapatilha\"\r\n        });\r\n        config_user_Menu.setHandler(1, ()-> this.user_mala(logged));\r\n        config_user_Menu.setHandler(2, ()-> this.user_tshirt(logged));\r\n        config_user_Menu.setHandler(3, ()-> this.user_sapatilha(logged));\r\n\r\n        config_user_Menu.run();\r\n    }\r\n\r\n    private void user_mala(Utilizador logged){\r\n        Malas mala=new Malas();\r\n        System.out.println(\"Introduza o tamanho da Mala (Pequeno, Medio, Grande): \");\r\n        System.out.println(\"Se as medidas (0,0 -> 10,0 x 0,0 -> 15,0 x 0,0 -> 10,0) é Pequeno\");\r\n        System.out.println(\"Se as medidas (10,0 -> 15,0 x 10,0-> 15,0 x 10,0 -> 15,0) é Medio\");\r\n        System.out.println(\"Se as medidas (15,0 -> 20,0 x 15,0 -> 25,0 x 15,0 -> 20,0) é Grande\");\r\n        String tamanho=scin.nextLine(), cancel =\"\";\r\n        while(!(tamanho.equals(\"Pequeno\") || tamanho.equals(\"Medio\") || tamanho.equals(\"Grande\"))){\r\n            System.out.println(\"Tamanho Inválido\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Tamanho da mala (Pequeno, Medio, Grande):\");\r\n            tamanho = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n        mala.setTamanho(tamanho);\r\n\r\n        System.out.println(\"Introduza o material:\");\r\n        String material=scin.nextLine();\r\n        mala.setMaterial(material);\r\n\r\n        String bool;\r\n        System.out.println(\"Deseja ativar premium [y/n]:\");\r\n        bool=scin.nextLine();\r\n        int p= 0;\r\n        if(bool.contains(\"y\")){\r\n            p = 1;\r\n            mala.ativaPremium();\r\n            mala.setDataPremium(this.getModel().now());\r\n\r\n            System.out.println(\"Valorização do premium ao ano (0-100): \");\r\n            double val = Integer.parseInt(scin.nextLine());\r\n\r\n            while(val < 0 || val > 100){\r\n                System.out.println(\"A valorização só pode ser entre 0% e 100%\");\r\n                System.out.println(\"Cancelar a adição [y/n]?\");\r\n                cancel = scin.nextLine();\r\n                if(cancel.contains(\"y\")) break;\r\n                System.out.println(\"Valorização: \");\r\n                val = Integer.parseInt(scin.nextLine());\r\n            }\r\n            if(cancel.contains(\"y\")) return;\r\n            mala.setValorizacao(val/100);\r\n\r\n            mala.setDataPremium(this.getModel().now());\r\n        }\r\n\r\n        Artigo artigo = common_artigo(p);\r\n        if(artigo.getTransportadoras() == null){\r\n            return;\r\n        }\r\n\r\n        mala.setNumeroDonos(artigo.getNumeroDonos());\r\n        mala.setEstado(artigo.getEstado());\r\n        mala.setBrand(artigo.getBrand());\r\n        mala.setPrecobase(artigo.getPrecobase());\r\n        mala.setDescricao(artigo.getDescricao());\r\n        mala.setTransportadoras(artigo.getTransportadoras());\r\n        mala.setColecao(artigo.getColecao());\r\n        mala.calcPreco(this.getModel().now());\r\n\r\n        System.out.println(\"Tamanho da mala: \" + mala.getTamanho());\r\n        System.out.println(\"Material da mala: \" + mala.getMaterial());\r\n        if(mala.isPremium()) System.out.println(\"Valorização ao ano: \" + mala.getValorizacao()*100 + \"%\");\r\n\r\n        System.out.println(\"Numero de donos: \" + mala.getNumeroDonos());\r\n        System.out.println(\"Estado: \" + mala.getEstado());\r\n        System.out.println(\"Marca: \" + mala.getBrand());\r\n        System.out.println(\"Descricao do artigo: \"+ mala.getDescricao());\r\n\r\n        System.out.println(\"Preco base: \" + mala.getPrecobase());\r\n        System.out.println(\"Preco após cálculos: \" + mala.getPreco());\r\n\r\n        while(this.getModel().getArtigos().containsKey(mala.getID())){\r\n            mala.setID(mala.generateID());\r\n        }\r\n        System.out.println(\"Id do artigo: \" + mala.getID());\r\n\r\n        mala.setBorn(this.getModel().now());\r\n        logged.addArtigo(mala);\r\n    }\r\n\r\n    private void user_tshirt(Utilizador logged){ //padrao\r\n        TShirt tshirt = new TShirt();\r\n        System.out.println(\"Introduza o tamanho da tshirt (S, M, L, XL, XXL):\");\r\n        String tamanho=scin.nextLine(), cancel =\"\";\r\n        while(!(tamanho.equals(\"S\") || tamanho.equals(\"M\") || tamanho.equals(\"L\") || tamanho.equals(\"XL\") || tamanho.equals(\"XXL\"))){\r\n            System.out.println(\"Tamanho Inválido\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Tamanho (S, M, L, XL, XXL):\");\r\n            tamanho = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n        tshirt.setTamanho(tamanho);\r\n\r\n\r\n        System.out.println(\"Introduza o padrao da TShirt (liso, riscas, palmeiras): \");\r\n        String padrao=scin.nextLine();\r\n        while(!(padrao.equals(\"palmeiras\") || padrao.equals(\"riscas\") || padrao.equals(\"liso\"))){\r\n            System.out.println(\"Padrão Inválido\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Padrao: (liso, riscas, palmeiras: \");\r\n            padrao = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n        tshirt.setPadrao(padrao);\r\n\r\n        Artigo artigo = common_artigo(0);\r\n        if(artigo.getTransportadoras() == null){\r\n            return;\r\n        }\r\n\r\n        tshirt.setNumeroDonos(artigo.getNumeroDonos());\r\n        tshirt.setEstado(artigo.getEstado());\r\n        tshirt.setBrand(artigo.getBrand());\r\n        tshirt.setPrecobase(artigo.getPrecobase());\r\n        tshirt.setDescricao(artigo.getDescricao());\r\n        tshirt.setTransportadoras(artigo.getTransportadoras());\r\n        tshirt.setColecao(artigo.getColecao());\r\n        tshirt.calcPreco();\r\n\r\n        System.out.println(\"Tamanho da tshirt: \" + tshirt.getTamanho());\r\n        System.out.println(\"Padrao da tshirt: \" + tshirt.getPadrao());\r\n\r\n        System.out.println(\"Numero de donos: \" + tshirt.getNumeroDonos());\r\n        System.out.println(\"Estado: \" + tshirt.getEstado());\r\n        System.out.println(\"Marca: \" + tshirt.getBrand());\r\n        System.out.println(\"Descricao do artigo: \"+ tshirt.getDescricao());\r\n\r\n        System.out.println(\"Preco base: \" + tshirt.getPrecobase());\r\n        System.out.println(\"Preco após cálculos: \" + tshirt.getPreco());\r\n\r\n        while(this.getModel().getArtigos().containsKey(tshirt.getID())){\r\n            tshirt.setID(tshirt.generateID());\r\n        }\r\n        System.out.println(\"Id do artigo: \" + tshirt.getID());\r\n\r\n        tshirt.setBorn(this.getModel().now());\r\n        logged.addArtigo(tshirt);\r\n    }\r\n\r\n    private void user_sapatilha(Utilizador logged){ //atacadores,cor\r\n\r\n        Sapatilhas sapatilha=new Sapatilhas();\r\n        System.out.println(\"Introduza o tamanho das sapatilhas (15...50):\");\r\n        String tam=scin.nextLine(), cancel= \"\", nd;\r\n        int tamanho=Integer.parseInt(tam);\r\n        while(tamanho < 15 || tamanho > 50){\r\n            System.out.println(\"Tamanho Inválido\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza o tamanho (15...50):\");\r\n            nd = scin.nextLine();\r\n            tamanho=Integer.parseInt(nd);\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n\r\n        sapatilha.setTamanho(tamanho);\r\n\r\n\r\n        System.out.println(\"Atacador ou fio?\");\r\n        String ata=scin.nextLine();\r\n        while(!(ata.equals(\"Atacador\") || ata.equals(\"fio\") || ata.equals(\"atacador\") || ata.equals(\"Fio\"))){\r\n            System.out.println(\"Isso não é fio ou atacador\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Atacador ou fio?\");\r\n            ata = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n        sapatilha.setAtacadores(ata.equals(\"Atacador\"));\r\n\r\n        System.out.println(\"Introduza a cor:\");\r\n        String cor=scin.nextLine();\r\n        sapatilha.setCor(cor);\r\n\r\n        String bool;\r\n        System.out.println(\"Deseja ativar premium [y/n]:\");\r\n        bool=scin.nextLine();\r\n        int p = 0;\r\n        if(bool.contains(\"y\")){\r\n            p=1;\r\n            sapatilha.ativaPremium();\r\n            sapatilha.setDataPremium(this.getModel().now());\r\n        }\r\n\r\n        Artigo artigo = common_artigo(p);\r\n        if(artigo.getTransportadoras() == null){\r\n            return;\r\n        }\r\n\r\n        sapatilha.setNumeroDonos(artigo.getNumeroDonos());\r\n        sapatilha.setEstado(artigo.getEstado());\r\n        sapatilha.setBrand(artigo.getBrand());\r\n        sapatilha.setPrecobase(artigo.getPrecobase());\r\n        sapatilha.setDescricao(artigo.getDescricao());\r\n        sapatilha.setTransportadoras(artigo.getTransportadoras());\r\n        sapatilha.setColecao(artigo.getColecao());\r\n        sapatilha.calcPreco(this.getModel().now());\r\n\r\n        System.out.println(\"Cor da sapatilha: \" + sapatilha.getCor());\r\n        System.out.println(\"Tamanho da sapatilha: \" + sapatilha.getTamanho());\r\n        System.out.println(\"Atacadores da sapatilha: \" + sapatilha.getAtacadores());\r\n\r\n        System.out.println(\"Numero de donos: \" + sapatilha.getNumeroDonos());\r\n        System.out.println(\"Estado: \" + sapatilha.getEstado());\r\n        System.out.println(\"Marca: \" + sapatilha.getBrand());\r\n\r\n        System.out.println(\"Descricao do artigo: \"+ sapatilha.getDescricao());\r\n        System.out.println(\"Preco base: \" + sapatilha.getPrecobase());\r\n        System.out.println(\"Preco após cálculos: \" + sapatilha.getPreco());\r\n\r\n        while(this.getModel().getArtigos().containsKey(sapatilha.getID())){\r\n            sapatilha.setID(sapatilha.generateID());\r\n        }\r\n        System.out.println(\"Id do artigo: \" + sapatilha.getID());\r\n\r\n        sapatilha.setBorn(this.getModel().now());\r\n        logged.addArtigo(sapatilha);\r\n    }\r\n\r\n    public Artigo common_artigo(int p){\r\n        Artigo artigo=new Artigo();\r\n        String cancel=\"\";\r\n        int numerodonos=0;\r\n        System.out.println(\"Introduza o numero de donos: \");\r\n        String nd = scin.nextLine();\r\n        numerodonos=Integer.parseInt(nd);\r\n        while(numerodonos < 0){\r\n            System.out.println(\"Numero de donos invalidos\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza o numero de donos:\");\r\n            nd = scin.nextLine();\r\n            numerodonos=Integer.parseInt(nd);\r\n        }\r\n        if(cancel.contains(\"y\")) return new Artigo();\r\n        artigo.setNumeroDonos(numerodonos);\r\n\r\n        if(numerodonos != 0){\r\n            String estado=\"\";\r\n            System.out.println(\"Introduza o estado (Pouco usado, Usado, Muito usado):\");\r\n            estado = scin.nextLine();\r\n            while(!( estado.equals(\"Pouco usado\") ||  estado.equals(\"Usado\") ||  estado.equals(\"Muito usado\"))){\r\n                System.out.println(\"Tipo de estado invalido!\");\r\n                System.out.println(\"Cancelar a adição [y/n]?\");\r\n                cancel = scin.nextLine();\r\n                if(cancel.contains(\"y\")) break;\r\n                System.out.println(\"Introduza o estado (Pouco usado, Usado, Muito usado):\");\r\n                estado = scin.nextLine();\r\n            }\r\n            if(cancel.contains(\"y\")) return new Artigo();\r\n            artigo.setEstado(estado);\r\n        } else{\r\n            artigo.setEstado(\"Novo\");\r\n        }\r\n\r\n        System.out.println(\"Introduza a marca do artigo: \");\r\n        String brand=scin.nextLine();\r\n        artigo.setBrand(brand);\r\n\r\n        double precobase=0;\r\n        System.out.println(\"Introduza o preco base (sem calculos): \");\r\n        String price = scin.nextLine();\r\n        precobase=Integer.parseInt(price);\r\n\r\n        while(precobase < 0){\r\n            System.out.println(\"Precobase: \");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza um novo precobase: \");\r\n            price = scin.nextLine();\r\n            precobase=Integer.parseInt(price);\r\n        }\r\n        if(cancel.contains(\"y\")) return new Artigo();\r\n        artigo.setPrecobase(precobase);\r\n\r\n        System.out.println(\"Descricao do artigo: \");\r\n        String descricao = scin.nextLine();\r\n        artigo.setDescricao(descricao);\r\n\r\n\r\n        System.out.println(\"Nome da colecao do artigo:\");\r\n        String id = scin.nextLine();\r\n        while(!(this.getModel().getColecao().containsKey(id))){\r\n            System.out.println(\"Não existe coleção com id/nome: \" + id);\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza um Id/nome da colecao: \");\r\n            id = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return new Artigo();\r\n\r\n        artigo.setColecao(this.getModel().getColecao().get(id));\r\n\r\n        System.out.println(\"Id da transportadora:\");\r\n        String idt = scin.nextLine();\r\n        boolean loop;\r\n        loop = !(this.getModel().getTransportadora().containsKey(idt));\r\n        if(!loop) loop = p == 1 && !this.getModel().getTransportadora().get(idt).getPremium();\r\n        while(loop){\r\n            if(!(this.getModel().getTransportadora().containsKey(idt))) System.out.println(\"Não existe transportadora com id: \" + idt);\r\n            else if(p == 1 && !this.getModel().getTransportadora().get(idt).getPremium()) System.out.println(\"Essa transportadora não tem expedição premium!\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Introduza o id da transportadora: \");\r\n            idt = scin.nextLine();\r\n            loop = !(this.getModel().getTransportadora().containsKey(idt));\r\n            if(!loop) loop = p == 1 && !this.getModel().getTransportadora().get(idt).getPremium();\r\n        }\r\n        artigo.setTransportadoras(this.getModel().getTransportadora().get(idt));\r\n\r\n        return artigo;\r\n    }\r\n\r\n    private void user_publish_artigo(Utilizador logged){\r\n        System.out.println(\"Insira o ID do artigo a publicar: \");\r\n        String id = scin.nextLine();\r\n        if(logged.getArtigos().containsKey(id)){\r\n            if(logged.getArtigos().get(id).isPublicado()){\r\n                logged.getArtigos().get(id).privar();\r\n                logged.getProdutosAVenda().remove(id);\r\n                System.out.println(\"Privado com sucesso!\");\r\n            } else {\r\n                logged.getArtigos().get(id).publicar();\r\n                logged.getProdutosAVenda().put(id, logged.getArtigos().get(id));\r\n                System.out.println(\"Publicado com sucesso!\");\r\n            }\r\n        } else{\r\n            System.out.println(\"Artigo \" + id + \" não existe\");\r\n        }\r\n    }\r\n\r\n    private void user_rm_artigo(Utilizador logged){\r\n\r\n        System.out.println(\"Insira o ID do artigo a remover: \");\r\n        String id = scin.nextLine();\r\n        if(logged.getArtigos().containsKey(id)){\r\n            System.out.println(\"Tem a certeza que quer remover o artigo [y/n]?\");\r\n            String clean = scin.nextLine();\r\n            if(clean.contains(\"y\")){\r\n                logged.getArtigos().remove(id);\r\n                System.out.println(\"Artigo removido com sucesso!\");\r\n            }else{\r\n                System.out.println(\"Cancelado com successo!\");\r\n            }\r\n        } else{\r\n            System.out.println(\"Artigo \" + id + \" não existe\");\r\n        }\r\n    }\r\n\r\n    private void user_encomendar(Utilizador logged){\r\n        Encomendas current = new Encomendas();\r\n        for(Map.Entry<String, Encomendas> entry : logged.getEncomendas().entrySet()){\r\n            if(entry.getValue().getEstado() == 0){\r\n                current = entry.getValue();\r\n                logged.getEncomendas().remove(entry.getKey());\r\n            }\r\n        }\r\n\r\n        NewMenu user_encomendar = new NewMenu(new String[]{\r\n                \"Comprar\", \"Adicionar artigo\" , \"Remover artigo\", \"Ver carrinho\", \"Limpar Carrinho\",\r\n                \"Ver cardapio\"\r\n        });\r\n\r\n        Encomendas finalCurrent = current;\r\n        AtomicInteger c = new AtomicInteger();\r\n        user_encomendar.setHandler(1, ()-> c.set(this.encomenda_comprar(finalCurrent, logged)));\r\n        user_encomendar.setHandler(2, ()-> this.encomenda_add(finalCurrent));\r\n        user_encomendar.setHandler(3, ()-> this.encomenda_rm(finalCurrent));\r\n        user_encomendar.setHandler(4, ()-> this.encomenda_see(finalCurrent));\r\n        user_encomendar.setHandler(5, ()-> this.encomenda_clean(finalCurrent));\r\n        user_encomendar.setHandler(6, this::encomenda_cardapio);\r\n\r\n        user_encomendar.setPreCondition(1, ()-> finalCurrent.getArtigos().size() > 0);\r\n        user_encomendar.setPreCondition(3, ()-> finalCurrent.getArtigos().size() > 0);\r\n        user_encomendar.setPreCondition(5, ()-> finalCurrent.getArtigos().size() > 0);\r\n        user_encomendar.setPreCondition(6, ()-> this.getModel().getArtigos().size() > 0);\r\n\r\n        user_encomendar.run();\r\n\r\n        if(c.get()!=1){\r\n            logged.adicionarEncomenda(finalCurrent);\r\n        }\r\n    }\r\n\r\n    public void encomenda_cardapio(){\r\n        System.out.println(this.getModel().getCardapio(this.getModel().now()));\r\n    }\r\n\r\n    private int encomenda_comprar(Encomendas current, Utilizador logged){\r\n\r\n        Map<String, Transportadoras> adicionadas = new HashMap<>();\r\n        Map<String, Integer> quantidade = new HashMap<>();\r\n        Map<String, Transportadoras> adicionadasp = new HashMap<>();\r\n        Map<String, Integer> quantidadep = new HashMap<>();\r\n\r\n        transportadoras_price(current, adicionadas, quantidade, adicionadasp, quantidadep);\r\n        double transportadoras = 0.0;\r\n\r\n        for (Map.Entry<String, Transportadoras> entry : adicionadas.entrySet()){\r\n            if(quantidade.get(entry.getKey()) <= 1){\r\n                transportadoras += entry.getValue().getPrecoExp().getPequeno();\r\n                entry.getValue().setRev(entry.getValue().getPrecoExp().getPequeno()\r\n                        + entry.getValue().getRev());\r\n            }else if(quantidade.get(entry.getKey()) <= 5){\r\n                transportadoras += entry.getValue().getPrecoExp().getMedio();\r\n                entry.getValue().setRev(entry.getValue().getPrecoExp().getMedio()\r\n                        + entry.getValue().getRev());\r\n            }else if(quantidade.get(entry.getKey()) > 5){\r\n                transportadoras += entry.getValue().getPrecoExp().getGrande();\r\n                entry.getValue().setRev(entry.getValue().getPrecoExp().getGrande()\r\n                        + entry.getValue().getRev());\r\n            }\r\n        }\r\n\r\n        for (Map.Entry<String, Transportadoras> entry : adicionadasp.entrySet()){\r\n            if(quantidadep.get(entry.getKey()) <= 1){\r\n                transportadoras += entry.getValue().getPrecoExp().getPequeno();\r\n                entry.getValue().setRev(entry.getValue().getPrecoPremium().getPequeno()\r\n                        + entry.getValue().getRev());\r\n            }else if(quantidadep.get(entry.getKey()) <= 5){\r\n                transportadoras += entry.getValue().getPrecoExp().getMedio();\r\n                entry.getValue().setRev(entry.getValue().getPrecoPremium().getMedio()\r\n                        + entry.getValue().getRev());\r\n            }else if(quantidadep.get(entry.getKey()) > 5){\r\n                transportadoras += entry.getValue().getPrecoExp().getGrande();\r\n                entry.getValue().setRev(entry.getValue().getPrecoPremium().getGrande()\r\n                        + entry.getValue().getRev());\r\n            }\r\n        }\r\n\r\n        double preco = 0.0;\r\n        for (Map.Entry<String, Artigo> entry : current.getArtigos().entrySet()) {\r\n            if(entry.getValue().getPreco() != -1.0){\r\n                preco += entry.getValue().getPreco();\r\n            }\r\n        }\r\n\r\n        this.getModel().setRev(this.getModel().getRev() + ((preco + transportadoras) * this.getModel().getVintagecut()));\r\n\r\n        current.enviar(this.getModel().now());\r\n        for (Map.Entry<String, Artigo> entry : current.getArtigos().entrySet()) {\r\n            Artigo art = this.getModel().getArtigos().get(entry.getKey());\r\n            art.setSold(art.getSold() + 1);\r\n        }\r\n        logged.adicionarEncomenda(current);\r\n        updates();\r\n        System.out.println(\"Obrigado e volte sempre!\");\r\n        return 1;\r\n    }\r\n\r\n    private void encomenda_add(Encomendas current){\r\n        System.out.println(\"Id do artigo a adicionar: \");\r\n        String id = scin.nextLine();\r\n\r\n        if(this.getModel().getArtigos().containsKey(id)){\r\n            if(this.getModel().getArtigos().get(id).isPublicado()){\r\n                current.addArtigo(this.getModel().getArtigos().get(id));\r\n            } else{\r\n                System.out.println(\"Artigo com id: \" + id + \" não está disponivel para venda.\");\r\n            }\r\n        } else{\r\n            System.out.println(\"Artigo com id: \" + id + \" não existe.\");\r\n        }\r\n    }\r\n\r\n    private void encomenda_rm(Encomendas current){\r\n        System.out.println(\"Id do artigo a remover: \");\r\n        String id = scin.nextLine();\r\n\r\n        if(current.getArtigos().containsKey(id)){\r\n            System.out.println(\"Tem a certeza que quer remover o artigo do carrinho [y/n]?\");\r\n            String clean = scin.nextLine();\r\n\r\n            if(clean.contains(\"y\")){\r\n                current.getArtigos().remove(id);\r\n                System.out.println(\"Limpado com successo!\");\r\n            }else{\r\n                System.out.println(\"Cancelado com successo!\");\r\n            }\r\n        } else{\r\n            System.out.println(\"Artigo com id: \" + id + \" não existe\");\r\n        }\r\n    }\r\n\r\n    // analisa o numero de artigos por transportadora, por ex: se ha 2 transportadoras e 4 artigos, sendo 1 associado a uma e 3 a outra:\r\n    // o preço das tranportadoras vai ser o pequeno da 1 + medio do 2.\r\n    // aplicar a lógica de cima com premium também\r\n    private void transportadoras_price(Encomendas current,\r\n                                       Map<String, Transportadoras> adicionadas, Map<String, Integer> quantidade,\r\n                                       Map<String, Transportadoras> adicionadasp, Map<String, Integer> quantidadep){\r\n        boolean equal;\r\n        for (Map.Entry<String, Artigo> entry : current.getArtigos().entrySet()) {\r\n            if(entry.getValue().isPremium()){\r\n                if(adicionadasp.size() == 0){\r\n                    quantidadep.put(\"0\", 1);\r\n                    adicionadasp.put(\"0\", entry.getValue().getTransportadoras());\r\n                } else{\r\n                    equal = false;\r\n                    for (Map.Entry<String, Transportadoras> entry2 : adicionadasp.entrySet()){\r\n                        if(entry.getValue().getTransportadoras().equals(entry2.getValue())){\r\n                            quantidadep.put(entry2.getKey(), quantidadep.get(entry2.getKey()) + 1);\r\n                            equal = true;\r\n                        }\r\n                    }\r\n                    if(!equal){\r\n                        quantidadep.put(Integer.toString(adicionadasp.size()), 1);\r\n                        adicionadasp.put(Integer.toString(adicionadasp.size()), entry.getValue().getTransportadoras());\r\n                    }\r\n                }\r\n            } else{\r\n                if(adicionadas.size() == 0){\r\n                    quantidade.put(\"0\", 1);\r\n                    adicionadas.put(\"0\", entry.getValue().getTransportadoras());\r\n                } else{\r\n                    equal = false;\r\n                    for (Map.Entry<String, Transportadoras> entry2 : adicionadas.entrySet()){\r\n                        if(entry.getValue().getTransportadoras().equals(entry2.getValue())){\r\n                            quantidade.put(entry2.getKey(), quantidade.get(entry2.getKey()) + 1);\r\n                            equal = true;\r\n                        }\r\n                    }\r\n                    if(!equal){\r\n                        quantidade.put(Integer.toString(adicionadas.size()), 1);\r\n                        adicionadas.put(Integer.toString(adicionadas.size()), entry.getValue().getTransportadoras());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private void encomenda_see(Encomendas current){\r\n        Map<String, Transportadoras> adicionadas = new HashMap<>();\r\n        Map<String, Integer> quantidade = new HashMap<>();\r\n        Map<String, Transportadoras> adicionadasp = new HashMap<>();\r\n        Map<String, Integer> quantidadep = new HashMap<>();\r\n\r\n        transportadoras_price(current, adicionadas, quantidade, adicionadasp, quantidadep);\r\n\r\n        double transportadoras = 0.0;\r\n\r\n        for (Map.Entry<String, Transportadoras> entry : adicionadas.entrySet()){\r\n            if(quantidade.get(entry.getKey()) <= 1){\r\n                transportadoras += entry.getValue().getPrecoExp().getPequeno();\r\n            }else if(quantidade.get(entry.getKey()) <= 5){\r\n                transportadoras += entry.getValue().getPrecoExp().getMedio();\r\n            }else if(quantidade.get(entry.getKey()) > 5){\r\n                transportadoras += entry.getValue().getPrecoExp().getGrande();\r\n            }\r\n        }\r\n\r\n        for (Map.Entry<String, Transportadoras> entry : adicionadasp.entrySet()){\r\n            if(quantidadep.get(entry.getKey()) <= 1){\r\n                transportadoras += entry.getValue().getPrecoPremium().getPequeno();\r\n            }else if(quantidadep.get(entry.getKey()) <= 5){\r\n                transportadoras += entry.getValue().getPrecoPremium().getMedio();\r\n            }else if(quantidadep.get(entry.getKey()) > 5){\r\n                transportadoras += entry.getValue().getPrecoPremium().getGrande();\r\n            }\r\n        }\r\n\r\n        double preco = 0.0;\r\n        for (Map.Entry<String, Artigo> entry : current.getArtigos().entrySet()) {\r\n            if(entry.getValue().getPreco() != -1.0){\r\n                preco += entry.getValue().getPreco();\r\n            }\r\n        }\r\n        System.out.println(\"Artigos: \" + current.getArtigos() + \"\\n\"\r\n                + \"Preço dos artigos: \" + preco + \"\\n\"\r\n                + \"Preço das transportadoras: \" + transportadoras  + \"\\n\"\r\n                + \"Preço total: \" + (preco + transportadoras)\r\n        );\r\n    }\r\n\r\n    private void encomenda_clean(Encomendas current){\r\n        System.out.println(\"Tem a certeza que quer limpar o carrinho [y/n]?\");\r\n        String clean = scin.nextLine();\r\n\r\n        if(clean.contains(\"y\")){\r\n            current.clean();\r\n            System.out.println(\"Limpado com successo!\");\r\n        }else{\r\n            System.out.println(\"Cancelado com successo!\");\r\n        }\r\n    }\r\n\r\n    private void user_receita(Utilizador logged){\r\n        System.out.println(\"Receita até ao momento: \" + (logged.getRevenue() - (logged.getRevenue()*this.getModel().getVintagecut())));\r\n    }\r\n\r\n    private void user_bought(Utilizador logged){\r\n        boolean s = true;\r\n        for (Map.Entry<String, Encomendas> entry : logged.getEncomendas().entrySet()) {\r\n            if(!(entry.getValue().getEstado() == 0)){\r\n                s = false;\r\n                System.out.println(entry.getValue().getArtigos());\r\n            }\r\n        }\r\n        if(s){\r\n            System.out.println(\"Ainda não comprou nenhum artigo!\");\r\n        }\r\n    }\r\n\r\n    private void user_sold(Utilizador logged){\r\n        for (Map.Entry<String, Artigo> entry : logged.getVendasEfetuadas().entrySet()) {\r\n            System.out.println(\" vendeu: \" + entry.getValue().getSold() + entry.getValue());\r\n        }\r\n        user_encomendar(logged);\r\n    }\r\n\r\n    private void user_selling(Utilizador logged){\r\n        for (Map.Entry<String, Artigo> entry : logged.getProdutosAVenda().entrySet()) {\r\n            System.out.println(entry.getValue());\r\n        }\r\n    }\r\n\r\n    private void registar(){\r\n        NewMenu registarMenu = new NewMenu(new String[]{\r\n                \"User\", \"Transportadora\", \"Coleção\"\r\n        });\r\n\r\n        registarMenu.setHandler(1, this::registar_user);\r\n        registarMenu.setHandler(2, this::registar_transportadora);\r\n        registarMenu.setHandler(3, this::registar_colecao);\r\n\r\n        registarMenu.run();\r\n\r\n    }\r\n\r\n    private void registar_colecao(){\r\n        String col, cancel = \"\";\r\n        System.out.println(\"Nome da coleção:\");\r\n        col = scin.nextLine();\r\n\r\n        while(this.getModel().getColecao().containsKey(col)){\r\n            System.out.println(\"Já existe coleção com esse nome!\");\r\n            System.out.println(\"Cancelar a adição [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Nome da coleção:\");\r\n            col = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n\r\n        Colecao cole = new Colecao(col, this.getModel().now());\r\n        cole.setData(this.getModel().now());\r\n\r\n        this.getModel().addColecao(cole);\r\n    }\r\n\r\n    private void registar_user(){\r\n        String email= \"\", nome, morada, nif=\"\", cancel = \"\";\r\n        System.out.println(\"Introduza o novo email:\");\r\n        email = scin.nextLine();\r\n        while(!(email.contains(\"@\")) || this.getModel().existsEmail(email)){\r\n            if(!(email.contains(\"@\"))){\r\n                System.out.println(\"E-mail Inválido! (não contém @)\");\r\n            }if(this.getModel().existsEmail(email)){\r\n                System.out.println(\"Este e-mail já esta registado!\");\r\n            }\r\n            System.out.println(\"Cancelar o registo [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"E-mail: \");\r\n            email = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n        System.out.println(\"Nome: \");\r\n        nome = scin.nextLine();\r\n        System.out.println(\"Morada: \");\r\n        morada = scin.nextLine();\r\n\r\n        System.out.println(\"Introduza o nif:\");\r\n        nif = scin.nextLine();\r\n        while(nif.length() != 9){\r\n            System.out.println(\"Nif Inválido!\");\r\n            System.out.println(\"Cancelar o registo [y/n]?\");\r\n            cancel = scin.nextLine();\r\n            if(cancel.contains(\"y\")) break;\r\n            System.out.println(\"Nif (123456789): \");\r\n            nif = scin.nextLine();\r\n        }\r\n        if(cancel.contains(\"y\")) return;\r\n\r\n        Utilizador user = new Utilizador(email, nome, morada, nif);\r\n        model.RegistarUser(user);\r\n\r\n        System.out.println(\"Id de login: \" + user.getID());\r\n    }\r\n\r\n    private void registar_transportadora(){\r\n        String imposto, p, m, g, premium, formula, diasatraso;\r\n        Transportadoras transportadora;\r\n\r\n        System.out.println(\"Preço para encomendas pequenas (1 artigo): \");\r\n        p = scin.nextLine();\r\n        System.out.println(\"Preço para encomendas médias (2 a 5 artigos): \");\r\n        m = scin.nextLine();\r\n        System.out.println(\"Preço para encomendas grandes (mais que 5 artigos): \");\r\n        g = scin.nextLine();\r\n        System.out.println(\"Imposto: \");\r\n        imposto = scin.nextLine();\r\n\r\n        transportadora = new Transportadoras(Double.parseDouble(p),Double.parseDouble(m) ,Double.parseDouble(g),\r\n                Double.parseDouble(imposto));\r\n\r\n        System.out.println(\"Formula de Cálculo\\nkeys:\\nvalor - valor base dos 3 tamanhos\\nimposto - imposto\");\r\n        formula = scin.nextLine();\r\n        transportadora.setFormula(formula);\r\n        transportadora.formula(formula);\r\n\r\n        System.out.println(\"Ativar Premium [y/n]? \");\r\n        premium = scin.nextLine();\r\n        if(premium.equals(\"y\")) {\r\n            transportadora.ativaPremium();\r\n            System.out.println(\"Formula de Cálculo Premium\\nkeys:\\nvalor - valor base dos 3 tamanhos\\nimposto - imposto\");\r\n            formula = scin.nextLine();\r\n            transportadora.setFpremium(formula);\r\n            transportadora.formulaPremium(formula);\r\n        }\r\n\r\n        System.out.println(\"Dias de atraso de envio em relação à compra: \");\r\n        diasatraso = scin.nextLine();\r\n\r\n        transportadora.setDiasAtraso(Integer.parseInt(diasatraso));\r\n\r\n        System.out.println(\"Numero de login: \" + this.getModel().getTransportadora().size());\r\n\r\n        model.addTransportadora(transportadora);\r\n    }\r\n\r\n    private sys getModel() {\r\n        return model;\r\n    }\r\n\r\n    private void setModel(sys model) {\r\n        this.model = model;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/UserApp.java b/src/UserApp.java
--- a/src/UserApp.java	(revision 302a99f682b3019acf8ea43cbb6f036fa09398b0)
+++ b/src/UserApp.java	(date 1684067864471)
@@ -45,9 +45,11 @@
             for (Map.Entry<String, Artigo> entry : logged.getProdutosAVenda().entrySet()) {
                 if(entry.getValue().getSold() > 0){
                     logged.adicionarVendaEfetuada(entry.getValue());
+                    //add num file, data, email, id do artigo
                 }
             }
         }
+
         //update dos calculos de cada artigo
         for (Map.Entry<String, Utilizador> entry : this.getModel().getUser().entrySet()) {
             for (Map.Entry<String, Artigo> entry2 : entry.getValue().getArtigos().entrySet()) {
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"dacbf7aa-37b9-4928-bf0e-36af9f396d26\" name=\"Changes\" comment=\"save &amp; load done\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/UserApp.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/UserApp.java\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"2OgcvW2yINCHWg9yUfiiUAUnwz3\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">{\r\n  &quot;keyToString&quot;: {\r\n    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\r\n    &quot;ignore.virus.scanning.warn.message&quot;: &quot;true&quot;,\r\n    &quot;project.structure.last.edited&quot;: &quot;Modules&quot;,\r\n    &quot;project.structure.proportion&quot;: &quot;0.0&quot;,\r\n    &quot;project.structure.side.proportion&quot;: &quot;0.0&quot;\r\n  }\r\n}</component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\Coding\\POO\\POO\\src\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"dacbf7aa-37b9-4928-bf0e-36af9f396d26\" name=\"Changes\" comment=\"\" />\r\n      <created>1681985896907</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1681985896907</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"encomendas + transportadoes (getters e setters)\">\r\n      <created>1682068064026</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1682068064026</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"correçoes em todas as classes &amp;&amp; mockup de um menu com alguma funcionalidades\">\r\n      <created>1683652499091</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1683652499091</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"list -&gt; map &amp;&amp; almost save obj done\">\r\n      <created>1683737072907</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1683737072907</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"save &amp; load done\">\r\n      <created>1683737282711</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1683737282711</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"5\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"encomendas + transportadoes (getters e setters)\" />\r\n    <MESSAGE value=\"correçoes em todas as classes &amp;&amp; mockup de um menu com alguma funcionalidades\" />\r\n    <MESSAGE value=\"list -&gt; map &amp;&amp; almost save obj done\" />\r\n    <MESSAGE value=\"save &amp; load done\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"save &amp; load done\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 302a99f682b3019acf8ea43cbb6f036fa09398b0)
+++ b/.idea/workspace.xml	(date 1684068946411)
@@ -4,7 +4,7 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="dacbf7aa-37b9-4928-bf0e-36af9f396d26" name="Changes" comment="save &amp; load done">
+    <list default="true" id="dacbf7aa-37b9-4928-bf0e-36af9f396d26" name="Changes" comment="time bugs &amp;&amp; stuff">
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/src/UserApp.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/UserApp.java" afterDir="false" />
     </list>
@@ -22,6 +22,19 @@
   </component>
   <component name="Git.Settings">
     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
+    <option name="UPDATE_TYPE" value="REBASE" />
+  </component>
+  <component name="GitHubPullRequestSearchHistory">{
+  &quot;lastFilter&quot;: {
+  }
+}</component>
+  <component name="GithubPullRequestsUISettings">
+    <option name="selectedUrlAndAccountId">
+      <UrlAndAccount>
+        <option name="accountId" value="dca20df7-159e-4a51-ad86-7a852fe90a44" />
+        <option name="url" value="https://github.com/jkaxsh/POO.git" />
+      </UrlAndAccount>
+    </option>
   </component>
   <component name="MarkdownSettingsMigration">
     <option name="stateVersion" value="1" />
@@ -83,7 +96,105 @@
       <option name="project" value="LOCAL" />
       <updated>1683737282711</updated>
     </task>
-    <option name="localTasksCounter" value="5" />
+    <task id="LOCAL-00005" summary="save &amp; load 100%">
+      <created>1683737521376</created>
+      <option name="number" value="00005" />
+      <option name="presentableId" value="LOCAL-00005" />
+      <option name="project" value="LOCAL" />
+      <updated>1683737521376</updated>
+    </task>
+    <task id="LOCAL-00006" summary="save &amp; load 110%">
+      <created>1683739179326</created>
+      <option name="number" value="00006" />
+      <option name="presentableId" value="LOCAL-00006" />
+      <option name="project" value="LOCAL" />
+      <updated>1683739179326</updated>
+    </task>
+    <task id="LOCAL-00007" summary="menu transportadora &amp;&amp; sorted user menu">
+      <created>1683743988808</created>
+      <option name="number" value="00007" />
+      <option name="presentableId" value="LOCAL-00007" />
+      <option name="project" value="LOCAL" />
+      <updated>1683743988808</updated>
+    </task>
+    <task id="LOCAL-00008" summary="encomendar &amp;&amp; artigos almost done">
+      <created>1683816658400</created>
+      <option name="number" value="00008" />
+      <option name="presentableId" value="LOCAL-00008" />
+      <option name="project" value="LOCAL" />
+      <updated>1683816658400</updated>
+    </task>
+    <task id="LOCAL-00009" summary="new admin settings &amp;&amp; encomenda bug">
+      <created>1683817809718</created>
+      <option name="number" value="00009" />
+      <option name="presentableId" value="LOCAL-00009" />
+      <option name="project" value="LOCAL" />
+      <updated>1683817809718</updated>
+    </task>
+    <task id="LOCAL-00010" summary="artigos probably done">
+      <created>1683831951835</created>
+      <option name="number" value="00010" />
+      <option name="presentableId" value="LOCAL-00010" />
+      <option name="project" value="LOCAL" />
+      <updated>1683831951835</updated>
+    </task>
+    <task id="LOCAL-00011" summary="change artigo configs">
+      <created>1683832178506</created>
+      <option name="number" value="00011" />
+      <option name="presentableId" value="LOCAL-00011" />
+      <option name="project" value="LOCAL" />
+      <updated>1683832178506</updated>
+    </task>
+    <task id="LOCAL-00012" summary="artigo configs menu">
+      <created>1683832198226</created>
+      <option name="number" value="00012" />
+      <option name="presentableId" value="LOCAL-00012" />
+      <option name="project" value="LOCAL" />
+      <updated>1683832198226</updated>
+    </task>
+    <task id="LOCAL-00013" summary="see artigos criados">
+      <created>1683832442897</created>
+      <option name="number" value="00013" />
+      <option name="presentableId" value="LOCAL-00013" />
+      <option name="project" value="LOCAL" />
+      <updated>1683832442897</updated>
+    </task>
+    <task id="LOCAL-00014" summary="sintax problem">
+      <created>1683832549515</created>
+      <option name="number" value="00014" />
+      <option name="presentableId" value="LOCAL-00014" />
+      <option name="project" value="LOCAL" />
+      <updated>1683832549515</updated>
+    </task>
+    <task id="LOCAL-00015" summary="vintage rev &amp;&amp; transportadoras rev">
+      <created>1683914056771</created>
+      <option name="number" value="00015" />
+      <option name="presentableId" value="LOCAL-00015" />
+      <option name="project" value="LOCAL" />
+      <updated>1683914056771</updated>
+    </task>
+    <task id="LOCAL-00016" summary="time stuff only 1. &amp;&amp; 4. left">
+      <created>1683926490112</created>
+      <option name="number" value="00016" />
+      <option name="presentableId" value="LOCAL-00016" />
+      <option name="project" value="LOCAL" />
+      <updated>1683926490112</updated>
+    </task>
+    <task id="LOCAL-00017" summary="time bugs &amp;&amp; stuff">
+      <created>1684066713580</created>
+      <option name="number" value="00017" />
+      <option name="presentableId" value="LOCAL-00017" />
+      <option name="project" value="LOCAL" />
+      <updated>1684066713580</updated>
+    </task>
+    <task id="LOCAL-00018" summary="time bugs &amp;&amp; stuff">
+      <created>1684067363989</created>
+      <option name="number" value="00018" />
+      <option name="presentableId" value="LOCAL-00018" />
+      <option name="project" value="LOCAL" />
+      <updated>1684067363989</updated>
+    </task>
+    <option name="localTasksCounter" value="19" />
     <servers />
   </component>
   <component name="Vcs.Log.Tabs.Properties">
@@ -102,6 +213,19 @@
     <MESSAGE value="correçoes em todas as classes &amp;&amp; mockup de um menu com alguma funcionalidades" />
     <MESSAGE value="list -&gt; map &amp;&amp; almost save obj done" />
     <MESSAGE value="save &amp; load done" />
-    <option name="LAST_COMMIT_MESSAGE" value="save &amp; load done" />
+    <MESSAGE value="save &amp; load 100%" />
+    <MESSAGE value="save &amp; load 110%" />
+    <MESSAGE value="menu transportadora &amp;&amp; sorted user menu" />
+    <MESSAGE value="encomendar &amp;&amp; artigos almost done" />
+    <MESSAGE value="new admin settings &amp;&amp; encomenda bug" />
+    <MESSAGE value="artigos probably done" />
+    <MESSAGE value="change artigo configs" />
+    <MESSAGE value="artigo configs menu" />
+    <MESSAGE value="see artigos criados" />
+    <MESSAGE value="sintax problem" />
+    <MESSAGE value="vintage rev &amp;&amp; transportadoras rev" />
+    <MESSAGE value="time stuff only 1. &amp;&amp; 4. left" />
+    <MESSAGE value="time bugs &amp;&amp; stuff" />
+    <option name="LAST_COMMIT_MESSAGE" value="time bugs &amp;&amp; stuff" />
   </component>
 </project>
\ No newline at end of file
